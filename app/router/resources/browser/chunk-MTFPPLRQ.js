import{a as j}from"./chunk-4SW5JHRX.js";import{a as A,c as z,e as V,l as N}from"./chunk-PCT4KDNL.js";import{a as U}from"./chunk-P2GLBVRW.js";import{b as D}from"./chunk-QHENB2RY.js";import{Aa as i,Ba as y,Oa as _,Pb as F,Qa as r,Ta as o,Tb as B,Ua as a,Va as h,Ya as M,Za as v,_ as T,_a as m,cb as s,d as k,db as d,eb as x,ha as b,hb as P,ia as S,ib as O,ja as C,jb as I,lb as E,nb as l,ob as p,xa as w}from"./chunk-ZITZSLP4.js";function W(e,g){if(e&1&&(o(0,"div",36),C(),o(1,"svg",37),h(2,"circle",38)(3,"path",39),a(),s(4),a()),e&2){let n=m();i(4),x(" ",n.uploadSuccess," ")}}function G(e,g){if(e&1&&(o(0,"div",40),C(),o(1,"svg",37),h(2,"circle",41)(3,"path",42),a(),s(4),a()),e&2){let n=m();i(4),x(" ",n.uploadError," ")}}function L(e,g){e&1&&(o(0,"div",43),C(),o(1,"svg",44),h(2,"rect",45)(3,"circle",46)(4,"path",47),a()())}function Y(e,g){if(e&1&&h(0,"img",48),e&2){let n=m();r("src",n.settings.favicon,w)}}function $(e,g){e&1&&(o(0,"span"),s(1),l(2,"translate"),a()),e&2&&(i(),d(p(2,1,"settings.chooseFavicon")))}function K(e,g){e&1&&(o(0,"span"),s(1),l(2,"translate"),a()),e&2&&(i(),x("",p(2,1,"settings.uploading"),"..."))}function q(e,g){if(e&1){let n=M();o(0,"button",49),v("click",function(){b(n);let t=m();return S(t.removeFile("favicon"))}),s(1),l(2,"translate"),a()}if(e&2){let n=m();r("disabled",n.uploadingFile==="favicon"),i(),x(" ",p(2,2,"settings.remove")," ")}}function H(e,g){if(e&1&&(o(0,"div",50)(1,"span",51),s(2),a()()),e&2){let n=m();i(2),d(n.getFileSize(n.settings.favicon))}}function J(e,g){e&1&&(o(0,"div",43),C(),o(1,"svg",52),h(2,"rect",53)(3,"circle",54)(4,"path",55),a()())}function Q(e,g){if(e&1&&h(0,"img",56),e&2){let n=m();r("src",n.settings.banner,w)}}function R(e,g){e&1&&(o(0,"span"),s(1),l(2,"translate"),a()),e&2&&(i(),d(p(2,1,"settings.chooseBanner")))}function X(e,g){e&1&&(o(0,"span"),s(1),l(2,"translate"),a()),e&2&&(i(),x("",p(2,1,"settings.uploading"),"..."))}function Z(e,g){if(e&1){let n=M();o(0,"button",49),v("click",function(){b(n);let t=m();return S(t.removeFile("banner"))}),s(1),l(2,"translate"),a()}if(e&2){let n=m();r("disabled",n.uploadingFile==="banner"),i(),x(" ",p(2,2,"settings.remove")," ")}}function ee(e,g){if(e&1&&(o(0,"div",50)(1,"span",51),s(2),a()()),e&2){let n=m();i(2),d(n.getFileSize(n.settings.banner))}}function te(e,g){if(e&1&&(o(0,"div",57)(1,"span"),s(2),a()()),e&2){let n=m();i(2),d(n.getUserInitials())}}function ne(e,g){if(e&1&&h(0,"img",58),e&2){let n=m();r("src",n.settings.userAvatar,w)}}function ie(e,g){e&1&&(o(0,"span"),s(1),l(2,"translate"),a()),e&2&&(i(),d(p(2,1,"settings.chooseAvatar")))}function ae(e,g){e&1&&(o(0,"span"),s(1),l(2,"translate"),a()),e&2&&(i(),x("",p(2,1,"settings.uploading"),"..."))}function oe(e,g){if(e&1){let n=M();o(0,"button",49),v("click",function(){b(n);let t=m();return S(t.removeFile("userAvatar"))}),s(1),l(2,"translate"),a()}if(e&2){let n=m();r("disabled",n.uploadingFile==="userAvatar"),i(),x(" ",p(2,2,"settings.remove")," ")}}function re(e,g){if(e&1&&(o(0,"div",50)(1,"span",51),s(2),a()()),e&2){let n=m();i(2),d(n.getFileSize(n.settings.userAvatar))}}var fe=(()=>{class e{constructor(n,c){this.settingsService=n,this.authService=c,this.uploadingFile=null,this.uploadError=null,this.uploadSuccess=null,this.settings=this.settingsService.getCurrentSettings()}ngOnInit(){this.settingsService.settings$.subscribe(n=>{this.settings=n})}onFileSelected(n,c){let u=n.target.files?.[0];u&&this.uploadFile(u,c)}uploadFile(n,c){return k(this,null,function*(){this.uploadingFile=c,this.uploadError=null,this.uploadSuccess=null;try{yield this.settingsService.uploadFile(n,c),this.uploadSuccess=`${this.getTypeDisplayName(c)} uploaded successfully!`,c==="favicon"&&this.settingsService.updateFavicon(),setTimeout(()=>{this.uploadSuccess=null},3e3)}catch(t){this.uploadError=t instanceof Error?t.message:"Upload failed"}finally{this.uploadingFile=null}})}removeFile(n){this.settingsService.removeFile(n),this.uploadSuccess=`${this.getTypeDisplayName(n)} removed successfully!`,n==="favicon"&&this.settingsService.updateFavicon(),setTimeout(()=>{this.uploadSuccess=null},3e3)}updateTextSettings(){this.settingsService.updateSettings({companyName:this.settings.companyName,appTitle:this.settings.appTitle}),this.uploadSuccess="Settings updated successfully!",setTimeout(()=>{this.uploadSuccess=null},3e3)}resetToDefaults(){confirm("Are you sure you want to reset all settings to defaults? This will remove all uploaded files.")&&(this.settingsService.resetToDefaults(),this.uploadSuccess="Settings reset to defaults!",this.settingsService.updateFavicon(),setTimeout(()=>{this.uploadSuccess=null},3e3))}getTypeDisplayName(n){switch(n){case"favicon":return"Favicon";case"banner":return"Banner";case"userAvatar":return"User Avatar";default:return n}}getFileSize(n){let t=n.split(",")[1].length*3/4;return t<1024?`${t.toFixed(0)} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(1)} MB`}triggerFileInput(n){document.getElementById(n)?.click()}getUserInitials(){let n=this.authService.getCurrentUser();if(!n||!n.name)return"U";let c=n.name.trim();if(c.length===0)return"U";let t=c.split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():c.substring(0,2).toUpperCase()}static{this.\u0275fac=function(c){return new(c||e)(y(j),y(U))}}static{this.\u0275cmp=T({type:e,selectors:[["app-settings"]],standalone:!0,features:[E],decls:95,vars:67,consts:[[1,"settings-container"],[1,"settings-header"],[1,"settings-description"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],[1,"settings-content"],[1,"settings-section"],[1,"form-row"],[1,"form-field"],["for","companyName"],["type","text","id","companyName","placeholder","Enter company name",3,"ngModelChange","blur","ngModel"],["for","appTitle"],["type","text","id","appTitle","placeholder","Enter app title",3,"ngModelChange","blur","ngModel"],[1,"upload-section"],[1,"upload-description"],[1,"upload-area"],[1,"upload-preview"],["class","preview-icon",4,"ngIf"],["alt","Favicon preview","class","preview-image favicon-preview",3,"src",4,"ngIf"],[1,"upload-controls"],[1,"upload-btn",3,"click","disabled"],[4,"ngIf"],["class","remove-btn",3,"disabled","click",4,"ngIf"],["class","file-info",4,"ngIf"],["type","file","id","favicon-input","accept","image/*",2,"display","none",3,"change"],[1,"upload-preview","banner-preview"],["alt","Banner preview","class","preview-image banner-image",3,"src",4,"ngIf"],["type","file","id","banner-input","accept","image/*",2,"display","none",3,"change"],["class","preview-icon avatar-placeholder",4,"ngIf"],["alt","Avatar preview","class","preview-image avatar-preview",3,"src",4,"ngIf"],["type","file","id","avatar-input","accept","image/*",2,"display","none",3,"change"],[1,"action-buttons"],[1,"reset-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1 4v6h6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M3.51 15a9 9 0 1 0 2.13-9.36L1 10","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"message","success"],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","12","r","10","stroke","#4CAF50","stroke-width","2"],["d","M8 12l2 2 4-4","stroke","#4CAF50","stroke-width","2","fill","none"],[1,"message","error"],["cx","12","cy","12","r","10","stroke","#f44336","stroke-width","2"],["d","M15 9l-6 6m0-6l6 6","stroke","#f44336","stroke-width","2"],[1,"preview-icon"],["width","32","height","32","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","3","y","3","width","18","height","18","rx","2","stroke","#ccc","stroke-width","2","fill","#f5f5f5"],["cx","8.5","cy","8.5","r","1.5","fill","#ccc"],["d","M21 15l-5-5L5 21","stroke","#ccc","stroke-width","2"],["alt","Favicon preview",1,"preview-image","favicon-preview",3,"src"],[1,"remove-btn",3,"click","disabled"],[1,"file-info"],[1,"file-size"],["width","48","height","24","viewBox","0 0 24 12","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","1","y","1","width","22","height","10","rx","2","stroke","#ccc","stroke-width","1","fill","#f5f5f5"],["cx","6","cy","4","r","1","fill","#ccc"],["d","M23 9l-4-4L1 11","stroke","#ccc","stroke-width","1"],["alt","Banner preview",1,"preview-image","banner-image",3,"src"],[1,"preview-icon","avatar-placeholder"],["alt","Avatar preview",1,"preview-image","avatar-preview",3,"src"]],template:function(c,t){c&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),s(3),l(4,"translate"),a(),o(5,"p",2),s(6),l(7,"translate"),a()(),_(8,W,5,1,"div",3)(9,G,5,1,"div",4),o(10,"div",5)(11,"div",6)(12,"h2"),s(13),l(14,"translate"),a(),o(15,"div",7)(16,"div",8)(17,"label",9),s(18),l(19,"translate"),a(),o(20,"input",10),I("ngModelChange",function(f){return O(t.settings.companyName,f)||(t.settings.companyName=f),f}),v("blur",function(){return t.updateTextSettings()}),a()(),o(21,"div",8)(22,"label",11),s(23),l(24,"translate"),a(),o(25,"input",12),I("ngModelChange",function(f){return O(t.settings.appTitle,f)||(t.settings.appTitle=f),f}),v("blur",function(){return t.updateTextSettings()}),a()()()(),o(26,"div",6)(27,"h2"),s(28),l(29,"translate"),a(),o(30,"div",13)(31,"h3"),s(32),l(33,"translate"),a(),o(34,"p",14),s(35),l(36,"translate"),a(),o(37,"div",15)(38,"div",16),_(39,L,5,0,"div",17)(40,Y,1,1,"img",18),a(),o(41,"div",19)(42,"button",20),v("click",function(){return t.triggerFileInput("favicon-input")}),_(43,$,3,3,"span",21)(44,K,3,3,"span",21),a(),_(45,q,3,4,"button",22)(46,H,3,1,"div",23),a()(),o(47,"input",24),v("change",function(f){return t.onFileSelected(f,"favicon")}),a()(),o(48,"div",13)(49,"h3"),s(50),l(51,"translate"),a(),o(52,"p",14),s(53),l(54,"translate"),a(),o(55,"div",15)(56,"div",25),_(57,J,5,0,"div",17)(58,Q,1,1,"img",26),a(),o(59,"div",19)(60,"button",20),v("click",function(){return t.triggerFileInput("banner-input")}),_(61,R,3,3,"span",21)(62,X,3,3,"span",21),a(),_(63,Z,3,4,"button",22)(64,ee,3,1,"div",23),a()(),o(65,"input",27),v("change",function(f){return t.onFileSelected(f,"banner")}),a()(),o(66,"div",13)(67,"h3"),s(68),l(69,"translate"),a(),o(70,"p",14),s(71),l(72,"translate"),a(),o(73,"div",15)(74,"div",16),_(75,te,3,1,"div",28)(76,ne,1,1,"img",29),a(),o(77,"div",19)(78,"button",20),v("click",function(){return t.triggerFileInput("avatar-input")}),_(79,ie,3,3,"span",21)(80,ae,3,3,"span",21),a(),_(81,oe,3,4,"button",22)(82,re,3,1,"div",23),a()(),o(83,"input",30),v("change",function(f){return t.onFileSelected(f,"userAvatar")}),a()()(),o(84,"div",6)(85,"h2"),s(86),l(87,"translate"),a(),o(88,"div",31)(89,"button",32),v("click",function(){return t.resetToDefaults()}),C(),o(90,"svg",33),h(91,"path",34)(92,"path",35),a(),s(93),l(94,"translate"),a()()()()()),c&2&&(i(3),d(p(4,39,"settings.title")),i(3),d(p(7,41,"settings.description")),i(2),r("ngIf",t.uploadSuccess),i(),r("ngIf",t.uploadError),i(4),d(p(14,43,"settings.appInfo")),i(5),d(p(19,45,"settings.companyName")),i(2),P("ngModel",t.settings.companyName),i(3),d(p(24,47,"settings.appTitle")),i(2),P("ngModel",t.settings.appTitle),i(3),d(p(29,49,"settings.customization")),i(4),d(p(33,51,"settings.favicon")),i(3),d(p(36,53,"settings.faviconDesc")),i(4),r("ngIf",!t.settings.favicon),i(),r("ngIf",t.settings.favicon),i(2),r("disabled",t.uploadingFile==="favicon"),i(),r("ngIf",t.uploadingFile!=="favicon"),i(),r("ngIf",t.uploadingFile==="favicon"),i(),r("ngIf",t.settings.favicon),i(),r("ngIf",t.settings.favicon),i(4),d(p(51,55,"settings.banner")),i(3),d(p(54,57,"settings.bannerDesc")),i(4),r("ngIf",!t.settings.banner),i(),r("ngIf",t.settings.banner),i(2),r("disabled",t.uploadingFile==="banner"),i(),r("ngIf",t.uploadingFile!=="banner"),i(),r("ngIf",t.uploadingFile==="banner"),i(),r("ngIf",t.settings.banner),i(),r("ngIf",t.settings.banner),i(4),d(p(69,59,"settings.userAvatar")),i(3),d(p(72,61,"settings.userAvatarDesc")),i(4),r("ngIf",!t.settings.userAvatar),i(),r("ngIf",t.settings.userAvatar),i(2),r("disabled",t.uploadingFile==="userAvatar"),i(),r("ngIf",t.uploadingFile!=="userAvatar"),i(),r("ngIf",t.uploadingFile==="userAvatar"),i(),r("ngIf",t.settings.userAvatar),i(),r("ngIf",t.settings.userAvatar),i(4),d(p(87,63,"settings.actions")),i(7),x(" ",p(94,65,"settings.resetDefaults")," "))},dependencies:[B,F,N,A,z,V,D],styles:[".settings-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:24px}.settings-header[_ngcontent-%COMP%]{margin-bottom:32px}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:600;color:#333}.settings-header[_ngcontent-%COMP%]   .settings-description[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px;line-height:1.5}.message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:8px;margin-bottom:24px;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #4caf50}.message.error[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;border:1px solid #f44336}.settings-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.settings-section[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;font-weight:600;color:#333;border-bottom:2px solid #f5f5f5;padding-bottom:12px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#333;font-size:14px}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #ddd;border-radius:8px;font-size:14px;transition:all .2s ease}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00b4d8;box-shadow:0 0 0 3px #00b4d81a}.upload-section[_ngcontent-%COMP%]{margin-bottom:32px}.upload-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.upload-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:600;color:#333}.upload-section[_ngcontent-%COMP%]   .upload-description[_ngcontent-%COMP%]{margin:0 0 16px;color:#666;font-size:14px;line-height:1.4}.upload-area[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-start;padding:20px;border:2px dashed #ddd;border-radius:12px;background:#fafafa;transition:all .2s ease}.upload-area[_ngcontent-%COMP%]:hover{border-color:#00b4d8;background:#f0f9ff}.upload-preview[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:8px;border:1px solid #eee;overflow:hidden}.upload-preview[_ngcontent-%COMP%]:not(.banner-preview){width:64px;height:64px}.upload-preview.banner-preview[_ngcontent-%COMP%]{width:120px;height:60px}.upload-preview[_ngcontent-%COMP%]   .preview-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#999}.upload-preview[_ngcontent-%COMP%]   .preview-icon.avatar-placeholder[_ngcontent-%COMP%]{background:#00b4d8;color:#fff;font-weight:600;font-size:18px}.upload-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.upload-preview[_ngcontent-%COMP%]   .preview-image.favicon-preview[_ngcontent-%COMP%]{object-fit:contain;padding:8px}.upload-controls[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.upload-controls[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%], .upload-controls[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;font-weight:500;cursor:pointer;transition:all .2s ease;border:none;font-size:14px}.upload-controls[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]:disabled, .upload-controls[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.upload-controls[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{background:#00b4d8;color:#fff}.upload-controls[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0096c7;transform:translateY(-1px)}.upload-controls[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{background:#f44336;color:#fff}.upload-controls[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#d32f2f;transform:translateY(-1px)}.upload-controls[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666;font-size:12px}.upload-controls[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{background:#f5f5f5;padding:4px 8px;border-radius:4px;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.action-buttons[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#ff9800;color:#fff;border:none;padding:12px 20px;border-radius:6px;font-weight:500;cursor:pointer;transition:all .2s ease}.action-buttons[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]:hover{background:#f57c00;transform:translateY(-1px)}@media (max-width: 768px){.settings-container[_ngcontent-%COMP%]{padding:16px}.upload-area[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.upload-preview[_ngcontent-%COMP%]{align-self:center}}"]})}}return e})();export{fe as SettingsComponent};

import{P as n,d as i,j as o}from"./chunk-ZITZSLP4.js";var s={production:!0,developmentMode:!1,apiUrl:"/api",enableMockAuth:!1};var h=(()=>{class r{constructor(){this.userSubject=new o(null),this.user$=this.userSubject.asObservable(),this.isAuthenticatedSubject=new o(!1),this.isAuthenticated$=this.isAuthenticatedSubject.asObservable(),this.isLocalDevelopment=this.checkLocalDevelopment(),this.loadUserInfo()}checkLocalDevelopment(){if(s.enableMockAuth!==void 0)return s.enableMockAuth;if(!this.isBrowser())return!1;let e=window.location.hostname,t=window.location.port;return e==="localhost"||e==="127.0.0.1"||e==="0.0.0.0"||t==="4200"||t==="3000"||e.includes("localhost")}loadUserInfo(){return i(this,null,function*(){console.log("\u{1F510} App router authentication - User is authenticated");let e={id:"authenticated-user",name:"Authenticated User",email:"user@company.com",scopes:["OrderCreator","OrderViewer","Admin"],roles:["Administrator","OrderCreator","OrderViewer"]};this.userSubject.next(e),this.isAuthenticatedSubject.next(!0)})}handleAuthError(){console.log("\u{1F510} App router handles authentication - no error handling needed")}getCurrentUser(){return this.userSubject.value}isAuthenticated(){return this.isAuthenticatedSubject.value}hasScope(e){let t=this.getCurrentUser();return t?t.scopes.includes(e):!1}hasRole(e){let t=this.getCurrentUser();return t?t.roles.includes(e):!1}canCreateOrders(){return this.hasScope("OrderCreator")||this.hasRole("OrderCreator")||this.hasRole("Administrator")}canViewOrders(){return this.hasScope("OrderViewer")||this.hasRole("OrderViewer")||this.hasRole("OrderCreator")||this.hasRole("Administrator")}isAdmin(){return this.hasScope("Admin")||this.hasRole("Administrator")}logout(){if(this.isLocalDevelopment){console.log("\u{1F513} Development mode - Logout disabled");return}this.isBrowser()&&(window.location.href="/do/logout")}isLocalDevelopmentMode(){return this.isLocalDevelopment}isBrowser(){return typeof window<"u"}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{h as a};
